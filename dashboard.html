<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>SudanPay | Dashboard</title>
  <link rel="stylesheet" href="style.css">

  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
</head>
<body>

<div class="card">
  <h2>SudanPay</h2>

  <p id="balance" style="color:#00e676;font-size:18px;">
    SDG 0
  </p>

  <button onclick="goSend()">إرسال أموال</button>
  <button onclick="goStatement()">كشف حساب</button>
  <button onclick="logout()" style="margin-top:15px;background:#ff5252;color:#fff;">
  تسجيل الخروج
  </button>
</div>

<script src="app.js"></script>
<script type="module">
  import { getAuth, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";

  const firebaseConfig = {
    apiKey: "AIzaSyB3vxJu_et-P80ek30I3MRdC_lGhooCCsc",
    authDomain: "sudanpay-e332a.firebaseapp.com",
    projectId: "sudanpay-e332a",
    storageBucket: "sudanpay-e332a.firebasestorage.app",
    messagingSenderId: "699809447272",
    appId: "1:699809447272:web:90f3780ed6c768c4322add"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  function logout() {
    signOut(auth).then(() => {
      window.location.href = "index.html";
    });
  }

  window.logout = logout;

  onAuthStateChanged(auth, (user) => {
    if (!user) {
      window.location.href = "index.html";
    }
  });
        </script>
